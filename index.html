<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Telegram Subscription Check</title>
</head>
<body>
<div id="message"></div>
<button onclick="checkSubscription()">Проверить подписку</button>
<div id="error"></div>

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
const userId = window.Telegram.WebApp.initDataUnsafe.user.id;

function checkSubscription() {
    axios.get('https://api.telegram.org/bot6137290760:AAHeVNh4_BvQRxEJjCjnF4ZV0brwGmNgcnk/getChatMember?chat_id=-1001982399686&user_id=' + userId)
        .then(response => {
            if (response.data.result.status === 'member' || response.data.result.status === 'creator' || response.data.result.status === 'administrator') {
                document.getElementById("message").innerHTML = "Вы участвуете!";
                document.getElementById("error").innerHTML = "";
            } else {
                document.getElementById("message").innerHTML = "Присоединитесь к нашему каналу!";
                document.getElementById("error").innerHTML = "";
            }
        })
        .catch(error => {
            console.error(error);
            document.getElementById("error").innerHTML = "Произошла ошибка: " + error.message;
            document.getElementById("message").innerHTML = "";
        });
}
</script>
</body>
</html>